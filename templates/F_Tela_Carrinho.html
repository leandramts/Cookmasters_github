{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="home-bg">

    <div class="container-auth" style="max-width: 700px; margin: 0 auto;">

        <h1 style="margin-bottom: 25px;">ðŸ›’ Meu Carrinho</h1>

        {% if receitas %}
            
            <!-- Lista de itens -->
            {% for r in receitas %}
                <div style="background: #f5fff5; padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                    
                    <div style="display: flex; align-items: center;">

                        {% if r.foto %}
                            <img src="{{ r.foto.url }}" 
                                 alt="Foto" 
                                 style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px; margin-right: 15px;">
                        {% endif %}

                        <div style="flex: 1;">
                            <h3 style="margin: 0; color:#088341;">{{ r.nome }}</h3>
                            <p style="margin: 5px 0;">Autor: {{ r.autor.usuario.nome }}</p>
                            <p style="margin: 5px 0;"><strong>PreÃ§o:</strong> R$ {{ r.preco }}</p>
                        </div>

                        <!-- Remover -->
                        <form method="POST" action="{% url 'remover_do_carrinho' r.id %}">
                            {% csrf_token %}
                            <button class="botao-link" 
                                    style="background:#ff4444; padding: 8px 12px; border-radius: 8px;">
                                Remover
                            </button>
                        </form>

                    </div>
                </div>
            {% endfor %}

            <hr style="margin: 20px 0;">

            <!-- Total -->
            <h2>Total: R$ {{ total }}</h2>

            <!-- BotÃ£o de pagar -->
            <form method="GET" action="{% url 'pagamento_carrinho' %}">
                {% csrf_token %}
                <button class="botao-link" style="margin-top: 20px;">
                    Finalizar Pagamento
                </button>
            </form>

        {% else %}
            <p style="font-size: 18px; color: grey; margin-top: 20px;">
                Seu carrinho estÃ¡ vazio :(
            </p>
        {% endif %}

        <a href="{% url 'home' %}" class="botao-link" style="margin-top: 25px;">
            Voltar
        </a>

    </div>

</div>
{% endblock %}
